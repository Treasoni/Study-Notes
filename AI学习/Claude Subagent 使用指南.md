---
tags: [ai]
---

# Subagent ä½¿ç”¨æŒ‡å—

> [!info] æ¦‚è¿°
> **Subagent æ˜¯ AI ä¸“å®¶åŠ©æ‰‹**ï¼Œæ¯ä¸ªä¸“æ³¨äºç‰¹å®šé¢†åŸŸï¼Œåœ¨ç‹¬ç«‹ä¸Šä¸‹æ–‡ä¸­è¿è¡Œã€‚å°±åƒé›‡ä½£ä¸åŒçš„ä¸“å®¶ï¼šä»£ç å®¡æŸ¥ä¸“å®¶ã€æ¢ç´¢ä¸“å®¶ã€è§„åˆ’ä¸“å®¶ï¼Œå„å¸å…¶èŒï¼Œæé«˜æ•ˆç‡ã€‚

## æ ¸å¿ƒæ¦‚å¿µ ğŸ’¡

### ä»€ä¹ˆæ˜¯ Subagent

**æ˜¯ä»€ä¹ˆ**ï¼šåœ¨ç‹¬ç«‹ä¸Šä¸‹æ–‡ä¸­è¿è¡Œçš„ AI ä»£ç†ï¼Œä¸“æ³¨å¤„ç†ç‰¹å®šä»»åŠ¡

**ä¸ºä»€ä¹ˆéœ€è¦**ï¼š
- ç‹¬ç«‹è¿è¡Œä¸æ±¡æŸ“ä¸»ä¼šè¯ token
- å¤šè½®å¯¹è¯è‡ªä¸»è¿­ä»£ä¼˜åŒ–
- å¤šä¸ª subagent å¯å¹¶è¡Œè¿è¡Œ
- è¿”å›æœ€ç»ˆç»“æœè€Œéä¸­é—´è¿‡ç¨‹

**ä¸å…¶ä»–æ¦‚å¿µå…³ç³»**ï¼šSubagent æ˜¯ Task å·¥å…·çš„å…·ä½“å®ç°ï¼Œé€šè¿‡æ’ä»¶ç³»ç»Ÿæ‰©å±•

### å†…ç½® Subagent ç±»å‹

| ç±»å‹ | å·¥å…· | ç”¨é€” | æ¯”å–» |
|------|------|------|------|
| **Bash** | Bash | å‘½ä»¤æ‰§è¡Œã€gitã€npm | è¿ç»´äººå‘˜ |
| **General Purpose** | å…¨éƒ¨ | å¤æ‚ç ”ç©¶ã€å¤šæ­¥éª¤ä»»åŠ¡ | å…¨èƒ½é¡¾é—® |
| **Explore** | é™¤ Task/Edit/Write | ä»£ç åº“å¿«é€Ÿæ¢ç´¢ | ä¾¦æ¢ |
| **Plan** | é™¤ Task/Edit/Write | æ¶æ„è§„åˆ’ã€è®¾è®¡æ–¹æ¡ˆ | æ¶æ„å¸ˆ |
| **Claude Code Guide** | æœç´¢å·¥å…· | Claude Code é—®é¢˜è§£ç­” | æŠ€æœ¯æ”¯æŒ |

## æ“ä½œæ­¥éª¤

### æ¨¡å¼ 1ï¼šè®© Claude è‡ªä¸»æ¢ç´¢

```bash
ä½ : è¿™ä¸ªé¡¹ç›®çš„è·¯ç”±æ˜¯æ€ä¹ˆé…ç½®çš„ï¼Ÿ

Claude: (å¯åŠ¨ Explore subagent)
    - æœç´¢è·¯ç”±ç›¸å…³æ–‡ä»¶
    - è¯»å–é…ç½®æ–‡ä»¶
    - åˆ†æè·¯ç”±è§„åˆ™
    - è¿”å›ç»“æœç»™ä½ 
```

### æ¨¡å¼ 2ï¼šå¹¶è¡Œæœç´¢å¤šä¸ªè¯é¢˜

```bash
ä½ : æˆ‘éœ€è¦åŒæ—¶äº†è§£ï¼š
    1. é”™è¯¯å¤„ç†æœºåˆ¶
    2. è®¤è¯æµç¨‹
    3. æ•°æ®åº“é…ç½®

Claude: (å¯åŠ¨ä¸‰ä¸ªå¹¶è¡Œ subagent)
    - åŒæ—¶æœç´¢ä¸‰ä¸ªè¯é¢˜
    - æ±‡æ€»ç»“æœè¿”å›
```

### ä½¿ç”¨è‡ªå®šä¹‰ Agent

```bash
# ç”¨ä»£ç å®¡æŸ¥ agent å®¡æŸ¥ä»£ç 
"ç”¨ code-reviewer agent å®¡æŸ¥ src/auth.js"
```

## æ³¨æ„äº‹é¡¹ âš ï¸

### å¸¸è§é”™è¯¯

**Subagent ä¸å¯åŠ¨**ï¼š
- âŒ ä»»åŠ¡å¤ªç®€å•ï¼ˆç›´æ¥ç”¨å·¥å…·æ›´å¿«ï¼‰
- âŒ è§¦å‘æ¡ä»¶ä¸æ˜ç¡®
- âŒ æ²¡æœ‰å¯¹åº”çš„ agent

**è¾“å‡ºä¸ç¬¦åˆé¢„æœŸ**ï¼š
- âŒ agent æè¿°ä¸æ¸…
- âŒ çº¦æŸæ¡ä»¶ä¸å¤Ÿ
- âŒ ç¼ºå°‘å…·ä½“ç¤ºä¾‹

**è‡ªå®šä¹‰ Agent ä¸å·¥ä½œ**ï¼š
- âŒ frontmatter æ ¼å¼é”™è¯¯
- âŒ æ’ä»¶æœªæ­£ç¡®åŠ è½½
- âŒ æ–‡ä»¶è·¯å¾„ä¸å¯¹

### å…³é”®é…ç½®ç‚¹

**Agent æ–‡ä»¶æ ¼å¼**ï¼š
```markdown
---
name: code-reviewer
description: Use when user asks to "review code"
model: inherit
color: blue
tools: ["Read", "Grep"]
---

ä½ æ˜¯ä¸€ä¸ªèµ„æ·±çš„ä»£ç å®¡æŸ¥ä¸“å®¶...
```

**å‘½åè§„èŒƒ**ï¼š
- âœ… `code-reviewer` - kebab-case
- âœ… `test-generator` - æ¸…æ™°æè¿°
- âŒ `helper` - å¤ªæ³›
- âŒ `my_agent` - æ— æ„ä¹‰

**æ¨¡å‹é€‰æ‹©**ï¼š
```yaml
# ç®€å•ä»»åŠ¡
model: haiku

# æ ‡å‡†ä»»åŠ¡
model: inherit   # æˆ– sonnet

# å¤æ‚æ¨ç†
model: sonnet

# æœ€é«˜è´¨é‡
model: opus
```

**å·¥å…·æƒé™åŸåˆ™**ï¼š
- åªç»™å¿…è¦çš„å·¥å…·
- éµå¾ªæœ€å°æƒé™åŸåˆ™
```yaml
# âŒ ä¸æ¨è
tools: ["*"]

# âœ… æ¨è
tools: ["Read", "Grep"]
```

## å¸¸è§é—®é¢˜ â“

**Q: ä¸ºä»€ä¹ˆæœ‰æ—¶å€™ Claude ä¸ä½¿ç”¨ subagentï¼Ÿ**

A: Subagent å¯åŠ¨æœ‰æˆæœ¬ã€‚å¯¹äºç®€å•æ“ä½œï¼ˆå¦‚è¯»å–ä¸€ä¸ªæ–‡ä»¶ï¼‰ï¼ŒClaude ä¼šç›´æ¥ä½¿ç”¨ä¸“ç”¨å·¥å…·æ›´å¿«ã€‚

**Q: å¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰ subagentï¼Ÿ**

A: éœ€è¦é€šè¿‡æ’ä»¶ï¼ˆPluginï¼‰ç³»ç»Ÿå®ç°ï¼š
```
my-plugin/
â”œâ”€â”€ .claude-plugin/
â”‚   â””â”€â”€ plugin.json
â””â”€â”€ agents/
    â””â”€â”€ my-agent.md
```

**Q: Explore å’Œ General Purpose æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ**

A:
- **Explore**ï¼šå¿«é€Ÿæ¢ç´¢ä»£ç åº“ï¼Œå·¥å…·å—é™ï¼ˆä¸èƒ½ç¼–è¾‘ï¼‰
- **General Purpose**ï¼šå¤æ‚ç ”ç©¶ä»»åŠ¡ï¼Œæ‹¥æœ‰å…¨éƒ¨å·¥å…·

**Q: å¦‚ä½•æµ‹è¯•æˆ‘åˆ›å»ºçš„ agentï¼Ÿ**

A:
```bash
# å¸¦æ’ä»¶å¯åŠ¨
claude --plugin-dir /path/to/my-plugin

# æµ‹è¯•è§¦å‘
"ç”¨ code-reviewer agent å®¡æŸ¥è¿™æ®µä»£ç "
```

**Q: plugin-dev æ’ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ**

A: å®˜æ–¹æä¾›çš„æ’ä»¶å¼€å‘å·¥å…·åŒ…ï¼ŒåŒ…å« `agent-creator` agentï¼Œå¯ä»¥å¸®ä½ å¿«é€Ÿç”Ÿæˆé«˜è´¨é‡çš„ agent é…ç½®ã€‚

---

## ä»é›¶åˆ›å»ºè‡ªå®šä¹‰ Agent ğŸš€

> [!tip] å­¦ä¹ è·¯å¾„
> åˆ›å»ºè‡ªå®šä¹‰ Agent â†’ ç†è§£ Plugin ç³»ç»Ÿ â†’ è°ƒè¯•ä¼˜åŒ– â†’ é«˜çº§ä½¿ç”¨

### åˆ›å»ºå‰çš„å‡†å¤‡

**äº†è§£ Plugin ç³»ç»Ÿæ¶æ„**

```
Pluginï¼ˆæ’ä»¶ï¼‰
â”œâ”€â”€ å…ƒæ•°æ®é…ç½® (plugin.json)
â”œâ”€â”€ Agent å®šä¹‰ (.md æ–‡ä»¶)
â””â”€â”€ èµ„æºæ–‡ä»¶ (å¯é€‰)
    â†“
Claude Code åŠ è½½
â”œâ”€â”€ è§£æ plugin.json
â”œâ”€â”€ æ³¨å†Œ Agent
â””â”€â”€ æä¾›è§¦å‘åŒ¹é…
```

**ç¡®å®š Agent çš„ç”¨é€”å’Œè¾¹ç•Œ**

åœ¨åˆ›å»ºä¹‹å‰ï¼Œé—®è‡ªå·±ï¼š
- è¿™ä¸ª Agent è§£å†³ä»€ä¹ˆå…·ä½“é—®é¢˜ï¼Ÿ
- å®ƒéœ€è¦è®¿é—®å“ªäº›å·¥å…·ï¼Ÿ
- è§¦å‘æ¡ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ
- è¾“å‡ºæ ¼å¼åº”è¯¥æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ

**é€‰æ‹©åˆé€‚çš„æ¨¡å‹å’Œå·¥å…·æƒé™**

| åœºæ™¯ | æ¨èæ¨¡å‹ | ç†ç”± |
|------|----------|------|
| ç®€å•æ ¼å¼è½¬æ¢ | `haiku` | å¿«é€Ÿå“åº”ï¼Œæˆæœ¬ä½ |
| ä»£ç åˆ†æ/å®¡æŸ¥ | `sonnet` æˆ– `inherit` | å¹³è¡¡é€Ÿåº¦å’Œè´¨é‡ |
| å¤æ‚æ¶æ„è®¾è®¡ | `opus` | æœ€é«˜æ¨ç†è´¨é‡ |

### å®Œæ•´åˆ›å»ºæ­¥éª¤

#### æ­¥éª¤ 1ï¼šåˆ›å»º Plugin ç›®å½•ç»“æ„

```bash
# åœ¨åˆé€‚çš„ä½ç½®åˆ›å»ºæ’ä»¶ç›®å½•
mkdir -p my-custom-plugin/.claude-plugin
mkdir -p my-custom-plugin/agents
cd my-custom-plugin
```

**å®Œæ•´ç›®å½•ç»“æ„**ï¼š
```
my-custom-plugin/
â”œâ”€â”€ .claude-plugin/
â”‚   â””â”€â”€ plugin.json          # Plugin å…ƒæ•°æ®ï¼ˆå¿…éœ€ï¼‰
â”œâ”€â”€ agents/
â”‚   â”œâ”€â”€ code-reviewer.md     # Agent å®šä¹‰æ–‡ä»¶
â”‚   â”œâ”€â”€ test-generator.md    # å¦ä¸€ä¸ª Agent
â”‚   â””â”€â”€ doc-writer.md        # ç¬¬ä¸‰ä¸ª Agent
â””â”€â”€ assets/                  # å¯é€‰çš„èµ„æºæ–‡ä»¶
    â”œâ”€â”€ templates/
    â””â”€â”€ examples/
```

#### æ­¥éª¤ 2ï¼šç¼–å†™ plugin.json é…ç½®

**å®Œæ•´ç¤ºä¾‹**ï¼š
```json
{
  "name": "my-custom-plugin",
  "version": "1.0.0",
  "description": "è‡ªå®šä¹‰ä»£ç å®¡æŸ¥å’Œæµ‹è¯•ç”Ÿæˆå·¥å…·é›†",
  "author": "Your Name <your.email@example.com>",
  "agents": ["code-reviewer", "test-generator", "doc-writer"],
  "keywords": ["code-review", "testing", "documentation"],
  "homepage": "https://github.com/yourname/my-custom-plugin",
  "claude": {
    "minVersion": "1.0.0"
  }
}
```

**å­—æ®µè¯´æ˜**ï¼š
- `name`: æ’ä»¶å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œä½¿ç”¨ kebab-case
- `version`: è¯­ä¹‰åŒ–ç‰ˆæœ¬å·
- `agents`: åˆ—å‡ºæ‰€æœ‰ agent å®šä¹‰æ–‡ä»¶ï¼ˆä¸å« .md æ‰©å±•åï¼‰
- `keywords`: å¸®åŠ©ç”¨æˆ·æœç´¢å’Œå‘ç°ä½ çš„æ’ä»¶

#### æ­¥éª¤ 3ï¼šç¼–å†™ Agent å®šä¹‰æ–‡ä»¶

**å®Œæ•´çš„ Agent å®šä¹‰ç»“æ„**ï¼š

```markdown
---
name: code-reviewer
description: Use when user asks to "review code", "æ£€æŸ¥ä»£ç ", "ä»£ç å®¡æŸ¥", "code review", "å®¡é˜…"
model: sonnet
color: blue
tools: ["Read", "Grep", "Glob", "Bash"]
---

# Code Reviewer Agent

ä½ æ˜¯ä¸€ä½èµ„æ·±çš„ä»£ç å®¡æŸ¥ä¸“å®¶ï¼Œä¸“æ³¨äºå‘ç°ä»£ç ä¸­çš„æ½œåœ¨é—®é¢˜å¹¶æä¾›æ”¹è¿›å»ºè®®ã€‚

## æ ¸å¿ƒèƒ½åŠ›
- è¯†åˆ«ä»£ç å¼‚å‘³å’Œåæ¨¡å¼
- å‘ç°æ½œåœ¨çš„å®‰å…¨æ¼æ´
- æå‡ºæ€§èƒ½ä¼˜åŒ–å»ºè®®
- ç¡®ä¿ä»£ç å¯ç»´æŠ¤æ€§

## å·¥ä½œæµç¨‹

1. **ç†è§£ä¸Šä¸‹æ–‡**
   - è¯»å–ç›¸å…³æ–‡ä»¶
   - äº†è§£é¡¹ç›®ç»“æ„
   - ç†è§£ä»£ç ç›®çš„

2. **å…¨é¢æ£€æŸ¥**
   - ä»£ç è´¨é‡ï¼ˆå‘½åã€ç»“æ„ã€å¤æ‚åº¦ï¼‰
   - å®‰å…¨æ€§ï¼ˆæ³¨å…¥æ¼æ´ã€æ•æ„Ÿä¿¡æ¯ï¼‰
   - æ€§èƒ½ï¼ˆç®—æ³•æ•ˆç‡ã€èµ„æºä½¿ç”¨ï¼‰
   - å¯ç»´æŠ¤æ€§ï¼ˆæ³¨é‡Šã€æ–‡æ¡£ã€æµ‹è¯•ï¼‰

3. **è¾“å‡ºç»“æœ**
   - æŒ‰ä¸¥é‡ç¨‹åº¦åˆ†ç±»é—®é¢˜
   - æä¾›å…·ä½“ä¿®å¤å»ºè®®
   - åŒ…å«ä»£ç ç¤ºä¾‹

## è¾“å‡ºæ ¼å¼

ä½¿ç”¨ä»¥ä¸‹æ ¼å¼è¾“å‡ºå®¡æŸ¥ç»“æœï¼š

### ğŸš¨ ä¸¥é‡é—®é¢˜
- [é—®é¢˜æè¿°]
  - ä½ç½®ï¼š`file:line`
  - åŸå› ï¼š[åŸå› è¯´æ˜]
  - ä¿®å¤ï¼š[å…·ä½“å»ºè®®]

### âš ï¸ è­¦å‘Š
- [é—®é¢˜æè¿°]
  - ä½ç½®ï¼š`file:line`
  - å»ºè®®ï¼š[æ”¹è¿›å»ºè®®]

### ğŸ’¡ ä¼˜åŒ–å»ºè®®
- [æ”¹è¿›ç‚¹]
  - ä½ç½®ï¼š`file:line`
  - å½“å‰ï¼š[å½“å‰ä»£ç ]
  - å»ºè®®ï¼š[ä¼˜åŒ–æ–¹æ¡ˆ]

## å®¡æŸ¥åŸåˆ™
- å…ˆç†è§£ï¼Œå†è¯„åˆ¤
- æä¾›å»ºè®¾æ€§åé¦ˆ
- è§£é‡Š"ä¸ºä»€ä¹ˆ"è€Œä¸åªæ˜¯"æ˜¯ä»€ä¹ˆ"
- è€ƒè™‘é¡¹ç›®å®é™…æƒ…å†µ
```

**Frontmatter å­—æ®µè¯¦è§£**ï¼š

| å­—æ®µ | å¿…éœ€ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|------|
| `name` | âœ… | Agent å”¯ä¸€æ ‡è¯† | `code-reviewer` |
| `description` | âœ… | è§¦å‘æè¿°ï¼Œæ”¯æŒå¤šè¯­è¨€ | `Use when user asks to "review code", "æ£€æŸ¥ä»£ç "` |
| `model` | âŒ | ä½¿ç”¨çš„æ¨¡å‹ | `sonnet`, `haiku`, `opus`, `inherit` |
| `color` | âŒ | UI æ˜¾ç¤ºé¢œè‰² | `blue`, `green`, `red`, `yellow`, `purple` |
| `tools` | âŒ | å…è®¸ä½¿ç”¨çš„å·¥å…·åˆ—è¡¨ | `["Read", "Grep", "Glob"]` |

#### æ­¥éª¤ 4ï¼šæµ‹è¯•å’Œè°ƒè¯•

**å¯åŠ¨æµ‹è¯•**ï¼š
```bash
# æ–¹å¼1ï¼šå‘½ä»¤è¡Œå‚æ•°
claude --plugin-dir /path/to/my-custom-plugin

# æ–¹å¼2ï¼šé…ç½®æ–‡ä»¶ï¼ˆæ¨èï¼‰
# åœ¨ ~/.claude/config.json ä¸­æ·»åŠ ï¼š
{
  "pluginDir": "/path/to/my-custom-plugin"
}
```

**éªŒè¯æ­¥éª¤**ï¼š

1. **æ£€æŸ¥ Agent æ˜¯å¦åŠ è½½**
```bash
# åœ¨ Claude Code ä¸­æ‰§è¡Œ
/agents                    # åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„ agents
# åº”è¯¥çœ‹åˆ° code-reviewer, test-generator ç­‰
```

2. **æµ‹è¯•è§¦å‘æ¡ä»¶**
```bash
# ç›´æ¥æè¿°è§¦å‘
"ç”¨ code-reviewer å®¡æŸ¥ src/auth.js"

# è‡ªç„¶è¯­è¨€è§¦å‘ï¼ˆå¦‚æœ description é…ç½®æ­£ç¡®ï¼‰
"è¯·æ£€æŸ¥ä¸€ä¸‹è¿™æ®µä»£ç æœ‰ä»€ä¹ˆé—®é¢˜"
"å¸®æˆ‘å®¡é˜…è¿™ä¸ªæ–‡ä»¶"
```

3. **æ£€æŸ¥è¾“å‡º**
- Agent æ˜¯å¦æ­£ç¡®å¯åŠ¨ï¼Ÿ
- æ˜¯å¦èƒ½è®¿é—®é…ç½®çš„å·¥å…·ï¼Ÿ
- è¾“å‡ºæ ¼å¼æ˜¯å¦ç¬¦åˆé¢„æœŸï¼Ÿ

**è°ƒè¯•æŠ€å·§**ï¼š

```bash
# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
claude --plugin-dir /path/to/plugin --log-level debug

# æ£€æŸ¥ frontmatter è¯­æ³•
cat agents/code-reviewer.md | head -10

# éªŒè¯ JSON æ ¼å¼
cat .claude-plugin/plugin.json | jq .
```

**å¸¸è§é—®é¢˜æ’æŸ¥**ï¼š

| é—®é¢˜ | å¯èƒ½åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|----------|----------|
| Agent æœªå‡ºç°åœ¨åˆ—è¡¨ | plugin.json è·¯å¾„é”™è¯¯ | æ£€æŸ¥ `.claude-plugin` ç›®å½•ä½ç½® |
| æ— æ³•è§¦å‘ | description ä¸åŒ¹é… | ç¡®ä¿åŒ…å«ç”¨æˆ·å¸¸ç”¨çš„è¡¨è¾¾æ–¹å¼ |
| å·¥å…·æŠ¥é”™ | tools æƒé™ä¸è¶³ | æ·»åŠ æ‰€éœ€å·¥å…·åˆ° frontmatter |
| è¾“å‡ºä¸ç¬¦åˆé¢„æœŸ | æŒ‡ä»¤ä¸å¤Ÿæ¸…æ™° | åœ¨ Agent å†…å®¹ä¸­æ·»åŠ æ›´å…·ä½“çš„çº¦æŸ |

#### æ­¥éª¤ 5ï¼šä¼˜åŒ–å’Œè¿­ä»£

**æ€§èƒ½ä¼˜åŒ–**ï¼š
```yaml
# ç®€å•ä»»åŠ¡ä½¿ç”¨ haiku
model: haiku

# é™åˆ¶å·¥å…·èŒƒå›´å‡å°‘å¼€é”€
tools: ["Read"]  # åªç»™éœ€è¦çš„å·¥å…·
```

**è§¦å‘ä¼˜åŒ–**ï¼š
```yaml
# æ·»åŠ æ›´å¤šè§¦å‘çŸ­è¯­
description: |
  Use when user asks to "review code", "æ£€æŸ¥ä»£ç ", "ä»£ç å®¡æŸ¥",
  "code review", "å®¡é˜…", "å®¡æŸ¥ä»£ç ", "code check", "æ£€æŸ¥è´¨é‡"
```

**è¾“å‡ºä¼˜åŒ–**ï¼š
```markdown
## è¾“å‡ºè¦æ±‚
- ç®€æ´æ˜äº†ï¼Œä¸è¶…è¿‡ 200 å­—
- ä½¿ç”¨ emoji å¢å¼ºå¯è¯»æ€§
- å…³é”®ä¿¡æ¯é«˜äº®æ˜¾ç¤º
- æä¾›å¯æ‰§è¡Œçš„å‘½ä»¤
```

### å®æˆ˜ç¤ºä¾‹

#### ç¤ºä¾‹ 1ï¼šä»£ç å®¡æŸ¥ Agent

```markdown
---
name: security-auditor
description: Use when user asks to "security check", "å®‰å…¨æ£€æŸ¥", "æ¼æ´æ‰«æ", "å®‰å…¨å®¡è®¡"
model: sonnet
color: red
tools: ["Read", "Grep", "Glob"]
---

# Security Auditor Agent

ä½ æ˜¯å®‰å…¨å®¡è®¡ä¸“å®¶ï¼Œä¸“æ³¨äºå‘ç°ä»£ç ä¸­çš„å®‰å…¨æ¼æ´ã€‚

## æ£€æŸ¥æ¸…å•
- [ ] SQL æ³¨å…¥é£é™©
- [ ] XSS æ¼æ´
- [ ] ç¡¬ç¼–ç å¯†é’¥
- [ ] ä¸å®‰å…¨çš„éšæœºæ•°
- [ ] è®¤è¯ç¼ºé™·
- [ ] æˆæƒé—®é¢˜

## è¾“å‡ºæ ¼å¼
```

#### ç¤ºä¾‹ 2ï¼šæ–‡æ¡£ç”Ÿæˆ Agent

```markdown
---
name: doc-generator
description: Use when user asks to "generate docs", "ç”Ÿæˆæ–‡æ¡£", "å†™æ³¨é‡Š", "document code"
model: inherit
color: green
tools: ["Read", "Glob", "Grep"]
---

# Documentation Generator

ä½ æ“…é•¿ä¸ºä»£ç ç”Ÿæˆæ¸…æ™°çš„æ–‡æ¡£ã€‚

## å·¥ä½œåŸåˆ™
1. ä¿æŒç®€æ´ï¼Œé¿å…åºŸè¯
2. å…³æ³¨"ä¸ºä»€ä¹ˆ"è€Œé"æ˜¯ä»€ä¹ˆ"
3. ä½¿ç”¨ç¤ºä¾‹è¯´æ˜ç”¨æ³•
4. ä¿æŒä¸ç°æœ‰æ–‡æ¡£é£æ ¼ä¸€è‡´

## è¾“å‡ºæ ¼å¼
```markdown
### [å‡½æ•°/ç±»å]

**ç”¨é€”**ï¼š[ä¸€å¥è¯è¯´æ˜]

**å‚æ•°**ï¼š
- `param1`: [è¯´æ˜]
- `param2`: [è¯´æ˜]

**è¿”å›**ï¼š[è¯´æ˜]

**ç¤ºä¾‹**ï¼š
\`\`\`typescript
// ä»£ç ç¤ºä¾‹
\`\`\`
```
```

#### ç¤ºä¾‹ 3ï¼šæµ‹è¯•ç”Ÿæˆ Agent

```markdown
---
name: test-generator
description: Use when user asks to "generate tests", "ç”Ÿæˆæµ‹è¯•", "å†™æµ‹è¯•ç”¨ä¾‹", "create tests"
model: sonnet
color: yellow
tools: ["Read", "Grep", "Glob"]
---

# Test Generator Agent

ä½ ä¸“æ³¨äºç”Ÿæˆå…¨é¢ä¸”å¯ç»´æŠ¤çš„æµ‹è¯•ç”¨ä¾‹ã€‚

## æµ‹è¯•åŸåˆ™
- Arrange-Act-Assert æ¨¡å¼
- æ¯ä¸ªæµ‹è¯•åªéªŒè¯ä¸€ä»¶äº‹
- ä½¿ç”¨æè¿°æ€§æµ‹è¯•åç§°
- Mock å¤–éƒ¨ä¾èµ–

## è¾“å‡ºæ ¼å¼
\`\`\`typescript
describe('[åŠŸèƒ½åç§°]', () => {
  describe('[æ­£å¸¸æµç¨‹]', () => {
    it('åº”è¯¥ [æœŸæœ›ç»“æœ]', () => {
      // Arrange
      // Act
      // Assert
    });
  });

  describe('[è¾¹ç•Œæƒ…å†µ]', () => {
    it('åº”è¯¥å¤„ç† [ç‰¹æ®Šæƒ…å†µ]', () => {
      // æµ‹è¯•ä»£ç 
    });
  });

  describe('[é”™è¯¯å¤„ç†]', () => {
    it('åº”è¯¥æŠ›å‡º [é”™è¯¯ç±»å‹] å½“ [æ¡ä»¶]', () => {
      // æµ‹è¯•ä»£ç 
    });
  });
});
\`\`\`
```

---

## é«˜çº§ä½¿ç”¨æŠ€å·§ ğŸ¯

### åœºæ™¯ 1ï¼šå¹¶è¡Œæ¢ç´¢

å½“ä½ éœ€è¦åŒæ—¶äº†è§£å¤šä¸ªä¸ç›¸å…³çš„æ¦‚å¿µæ—¶ï¼Œå¯ä»¥å¹¶è¡Œå¯åŠ¨å¤šä¸ª Explore agentï¼š

```bash
# ä½ å¯ä»¥è¿™æ ·é—®
"æˆ‘éœ€è¦åŒæ—¶äº†è§£ï¼š1. é”™è¯¯å¤„ç†æœºåˆ¶ 2. è®¤è¯æµç¨‹ 3. æ•°æ®åº“é…ç½®"

# Claude ä¼šå¯åŠ¨ä¸‰ä¸ªå¹¶è¡Œçš„ Explore agent
# æ¯ä¸ªç‹¬ç«‹æ¢ç´¢ä¸€ä¸ªä¸»é¢˜
# æœ€åæ±‡æ€»ç»“æœç»™ä½ 
```

**æœ€ä½³å®è·µ**ï¼š
- ç¡®ä¿ä»»åŠ¡ä¹‹é—´çœŸæ­£ç‹¬ç«‹
- é™åˆ¶å¹¶è¡Œæ•°é‡ï¼ˆå»ºè®® 2-4 ä¸ªï¼‰
- æä¾›æ˜ç¡®çš„æ¢ç´¢èŒƒå›´

### åœºæ™¯ 2ï¼šå¤æ‚ä»»åŠ¡åˆ†è§£

å½“ä»»åŠ¡æ¶‰åŠå¤šä¸ªæ­¥éª¤æ—¶ï¼Œä½¿ç”¨ Plan agent å…ˆè®¾è®¡æ–¹æ¡ˆï¼š

```bash
"æˆ‘éœ€è¦é‡æ„è®¤è¯æ¨¡å—ï¼Œä½†ä¸ç¡®å®šä»å“ªé‡Œå¼€å§‹"

# Claude å¯åŠ¨ Plan agent
# 1. åˆ†æç°æœ‰ä»£ç 
# 2. è¯†åˆ«é‡æ„ç‚¹
# 3. åˆ¶å®šåˆ†æ­¥è®¡åˆ’
# 4. æå‡ºéªŒè¯æ–¹æ³•
```

**ä½¿ç”¨ Plan agent çš„æ—¶æœº**ï¼š
- æ¶æ„è°ƒæ•´
- å¤§è§„æ¨¡é‡æ„
- åŠŸèƒ½æ¨¡å—æ–°å¢
- æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ

### åœºæ™¯ 3ï¼šè‡ªä¸»ç ”ç©¶

å½“é—®é¢˜éœ€è¦æ·±å…¥ä»£ç åº“æ¢ç´¢æ—¶ï¼Œè®© Explore agent è‡ªä¸»å·¥ä½œï¼š

```bash
"è¿™ä¸ªé¡¹ç›®æ˜¯å¦‚ä½•å¤„ç†å›½é™…åŒ–çš„ï¼Ÿ"

# Explore agent ä¼šï¼š
# - æœç´¢ i18n ç›¸å…³ä»£ç 
# - æ‰¾åˆ°é…ç½®æ–‡ä»¶
# - ç†è§£å®ç°æœºåˆ¶
# - è¿”å›å®Œæ•´çš„åˆ†æ
```

**è®¾ç½®æ¢ç´¢æ·±åº¦**ï¼š
```bash
# å¿«é€Ÿæ¦‚è§ˆ
"ç®€å•ä»‹ç»ä¸€ä¸‹ [ä¸»é¢˜]"

# æ·±å…¥åˆ†æ
"è¯¦ç»†åˆ†æ [ä¸»é¢˜] çš„å®ç°ï¼ŒåŒ…æ‹¬é…ç½®ã€ä½¿ç”¨ã€è¾¹ç•Œæƒ…å†µ"
```

### åœºæ™¯ 4ï¼šä½¿ç”¨è‡ªå®šä¹‰ Agent

**å¯åŠ¨æ–¹å¼**ï¼š

1. **é€šè¿‡ --plugin-dir å‚æ•°**ï¼ˆä¸´æ—¶ï¼‰
```bash
claude --plugin-dir /path/to/my-plugin
```

2. **é€šè¿‡é…ç½®æ–‡ä»¶è®¾ç½®**ï¼ˆæ°¸ä¹…ï¼‰
```json
// ~/.claude/config.json
{
  "pluginDir": "/path/to/my-plugin"
}
```

3. **éªŒè¯ Agent æ˜¯å¦åŠ è½½**
```bash
/agents  # æŸ¥çœ‹æ‰€æœ‰å¯ç”¨ agents
```

**è§¦å‘æ–¹å¼**ï¼š

1. **ç›´æ¥æè¿°**
```bash
"ç”¨ code-reviewer å®¡æŸ¥è¿™æ®µä»£ç "
"ä½¿ç”¨ security-auditor æ£€æŸ¥å®‰å…¨é—®é¢˜"
```

2. **è‡ªç„¶è§¦å‘**ï¼ˆæ¨èï¼‰
```bash
# å¦‚æœ description é…ç½®å¾—å½“ï¼Œè¿™äº›éƒ½èƒ½è§¦å‘ï¼š
"è¯·æ£€æŸ¥ä»£ç è´¨é‡"
"å¸®æˆ‘çœ‹çœ‹æœ‰æ²¡æœ‰å®‰å…¨é—®é¢˜"
"ç”Ÿæˆä¸€äº›æµ‹è¯•ç”¨ä¾‹"
```

3. **æ˜¾å¼æŒ‡å®š**
```bash
# å½“æœ‰å¤šä¸ª agent å¯èƒ½åŒ¹é…æ—¶
"è¯·ç”¨ doc-generator agent ä¸ºè¿™ä¸ªå‡½æ•°ç”Ÿæˆæ–‡æ¡£"
```

**ç»„åˆä½¿ç”¨**ï¼š
```bash
# å…ˆç”¨ Explore äº†è§£ä»£ç 
"æ¢ç´¢ä¸€ä¸‹è®¤è¯æ¨¡å—çš„å®ç°"

# å†ç”¨ custom agent å¤„ç†
"ç”¨ code-reviewer å®¡æŸ¥ src/auth/login.js"
```

### æ€§èƒ½ä¼˜åŒ–å»ºè®®

| åœºæ™¯ | æ¨èé…ç½® | è¯´æ˜ |
|------|----------|------|
| å¿«é€Ÿæ ¼å¼åŒ– | `model: haiku` | ç®€å•ä»»åŠ¡ç”¨è½»é‡æ¨¡å‹ |
| ä»£ç å®¡æŸ¥ | `model: sonnet` | å¹³è¡¡è´¨é‡å’Œé€Ÿåº¦ |
| æ¶æ„è®¾è®¡ | `model: opus` | å¤æ‚æ¨ç†ç”¨æœ€å¼ºæ¨¡å‹ |
| æ–‡æœ¬æœç´¢ | é™åˆ¶ tools | åªç»™å¿…è¦çš„å·¥å…· |

---

---

## Plugin ç»„ç»‡ç­–ç•¥å’Œæœ€ä½³å®è·µ ğŸ“

### ç­–ç•¥é€‰æ‹©

æ ¹æ® [Claude Code æ’ä»¶å‚è€ƒæ‰‹å†Œ](https://www.runoob.com/claude-code/claude-code-plugin-ref.html)ï¼ŒPlugin çš„ç»„ç»‡æ–¹å¼æœ‰å¤šç§ç­–ç•¥ã€‚

**ç­–ç•¥ Aï¼šå…¨å±€é€šç”¨æ’ä»¶ï¼ˆæ¨èï¼‰**

å°†é€šç”¨å·¥å…·æ”¾åœ¨å…¨å±€ç›®å½•ï¼Œæ‰€æœ‰é¡¹ç›®å…±äº«ï¼š

```bash
~/.claude/plugins/
â”œâ”€â”€ code-review/          # é€šç”¨ä»£ç å®¡æŸ¥å·¥å…·
â”‚   â”œâ”€â”€ .claude-plugin/
â”‚   â”‚   â””â”€â”€ plugin.json
â”‚   â””â”€â”€ agents/
â”‚       â”œâ”€â”€ style-checker.md
â”‚       â””â”€â”€ security-scanner.md
â”œâ”€â”€ documentation/        # æ–‡æ¡£ç”Ÿæˆå·¥å…·
â””â”€â”€ testing/              # æµ‹è¯•è¾…åŠ©å·¥å…·
```

é…ç½®æ–¹å¼ï¼š
```bash
# åœ¨ ~/.claude/config.json ä¸­é…ç½®
{
  "pluginDir": "~/.claude/plugins"
}
```

**é€‚ç”¨åœºæ™¯**ï¼š
- è·¨é¡¹ç›®é€šç”¨çš„å·¥å…·
- ä¸ªäººå¼€å‘åŠ©æ‰‹
- å›¢é˜Ÿå…±äº«çš„æ ‡å‡†å·¥å…·

---

**ç­–ç•¥ Bï¼šé¡¹ç›®ç‰¹å®šæ’ä»¶**

ä¸ºæ¯ä¸ªé¡¹ç›®åˆ›å»ºä¸“å±æ’ä»¶ï¼š

```bash
my-project/
â”œâ”€â”€ .claude-plugins/
â”‚   â””â”€â”€ project-specific/
â”‚       â”œâ”€â”€ .claude-plugin/
â”‚       â”‚   â””â”€â”€ plugin.json
â”‚       â””â”€â”€ agents/
â”‚           â”œâ”€â”€ business-rule-validator.md
â”‚           â””â”€â”€ api-doc-generator.md
â”œâ”€â”€ src/
â””â”€â”€ package.json
```

å¯åŠ¨æ–¹å¼ï¼š
```bash
cd my-project
claude --plugin-dir .claude-plugins/project-specific
```

**é€‚ç”¨åœºæ™¯**ï¼š
- ä¸šåŠ¡ç‰¹å®šçš„è§„åˆ™éªŒè¯
- é¡¹ç›®ç‰¹å®šçš„æ–‡æ¡£ç”Ÿæˆ
- å›¢é˜Ÿå†…éƒ¨ä¸“ç”¨å·¥å…·

---

**ç­–ç•¥ Cï¼šæ··åˆæ–¹å¼ï¼ˆæœ€ä½³å®è·µï¼‰**

ç»“åˆå…¨å±€å’Œé¡¹ç›®æ’ä»¶ï¼š

```bash
# å…¨å±€æ’ä»¶ - é€šç”¨å·¥å…·
~/.claude/plugins/
â”œâ”€â”€ code-quality/
â”œâ”€â”€ testing/
â””â”€â”€ documentation/

# é¡¹ç›®æ’ä»¶ - é¡¹ç›®ç‰¹å®š
my-project/.claude-plugins/
â””â”€â”€ e-commerce-validator/
```

é…ç½®æ–¹å¼ï¼š
```bash
# é…ç½®æ–‡ä»¶è®¾ç½®å…¨å±€æ’ä»¶
# ~/.claude/config.json
{
  "pluginDir": "~/.claude/plugins"
}

# å‘½ä»¤è¡Œæ·»åŠ é¡¹ç›®æ’ä»¶
claude --plugin-dir ~/.claude/plugins --plugin-dir .claude-plugins
```

---

### å¤šæ’ä»¶é…ç½®è¯¦è§£

**æ–¹å¼ 1ï¼šå‘½ä»¤è¡ŒæŒ‡å®šå¤šä¸ªç›®å½•**

```bash
# æŒ‡å®šä¸¤ä¸ªæ’ä»¶ç›®å½•
claude --plugin-dir ~/.claude/plugins --plugin-dir ./project-plugins

# æŒ‡å®šä¸‰ä¸ªæˆ–æ›´å¤š
claude \
  --plugin-dir ~/.claude/global-tools \
  --plugin-dir ./company-plugins \
  --plugin-dir ./project-specific
```

**æ–¹å¼ 2ï¼šä½¿ç”¨ç»Ÿä¸€çš„çˆ¶ç›®å½•**

å°†æ‰€æœ‰æ’ä»¶æ”¾åœ¨ä¸€ä¸ªçˆ¶ç›®å½•ä¸‹ï¼Œè‡ªåŠ¨å‘ç°æ‰€æœ‰å­ç›®å½•ï¼š

```bash
~/.claude/plugins/
â”œâ”€â”€ code-review/      # æ’ä»¶1
â”œâ”€â”€ testing/          # æ’ä»¶2
â”œâ”€â”€ docs/             # æ’ä»¶3
â””â”€â”€ project-specific/ # æ’ä»¶4
```

é…ç½®ï¼š
```bash
# åªéœ€é…ç½®ä¸€æ¬¡çˆ¶ç›®å½•
claude --plugin-dir ~/.claude/plugins

# Claude ä¼šè‡ªåŠ¨æ‰«ææ‰€æœ‰å­æ’ä»¶
```

**æ–¹å¼ 3ï¼šä½¿ç”¨ Plugin ç®¡ç†ç³»ç»Ÿ**

```bash
# åˆ—å‡ºå·²å®‰è£…æ’ä»¶
claude plugin list

# å®‰è£…æ’ä»¶ï¼ˆä» GitHub æˆ–æœ¬åœ°è·¯å¾„ï¼‰
claude plugin install username/repo
claude plugin install /path/to/local/plugin

# å¯ç”¨/ç¦ç”¨æ’ä»¶
claude plugin enable code-review
claude plugin disable testing

# æ›´æ–°æ’ä»¶
claude plugin update code-review

# åˆ é™¤æ’ä»¶
claude plugin remove code-review
```

---

### Plugin vs Project å…³ç³»

| ç»´åº¦ | Plugin | Project |
|------|--------|---------|
| **ä½œç”¨åŸŸ** | å¯è·¨é¡¹ç›®å¤ç”¨ | ç‰¹å®šé¡¹ç›® |
| **ä½ç½®** | ç‹¬ç«‹ç›®å½•æˆ–å…±äº«ç›®å½• | é¡¹ç›®å†…éƒ¨ |
| **å†…å®¹** | Agent å®šä¹‰ã€èµ„æºæ–‡ä»¶ | ä¸šåŠ¡ä»£ç  |
| **ç‰ˆæœ¬æ§åˆ¶** | ç‹¬ç«‹ä»“åº“æˆ–å…±äº« | è·Ÿéšé¡¹ç›® |
| **æ›´æ–°é¢‘ç‡** | è¾ƒä½ï¼ˆç¨³å®šåï¼‰ | æŒç»­æ›´æ–° |
| **é…ç½®æ–¹å¼** | --plugin-dir å‚æ•° | é¡¹ç›®ç»“æ„ |

**æœ€ä½³å®è·µ**ï¼š

1. **é€šç”¨èƒ½åŠ›æ”¾ Plugin**
   - ä»£ç é£æ ¼æ£€æŸ¥
   - å®‰å…¨æ‰«æ
   - æ–‡æ¡£ç”Ÿæˆæ¨¡æ¿
   - æµ‹è¯•ç”Ÿæˆæ¨¡å¼

2. **ä¸šåŠ¡é€»è¾‘æ”¾ Project**
   - ä¸šåŠ¡è§„åˆ™éªŒè¯
   - API æ–‡æ¡£ç”Ÿæˆ
   - é¢†åŸŸç‰¹å®šå·¥å…·

3. **å›¢é˜Ÿåä½œå»ºè®®**
   ```bash
   # å›¢é˜Ÿå…±äº«æ’ä»¶ä»“åº“
   company-plugins/
   â”œâ”€â”€ frontend-standards/
   â”œâ”€â”€ backend-standards/
   â””â”€â”€ documentation-templates/

   # ä¸ªäººæ’ä»¶ä»“åº“
   ~/.claude/plugins/
   â”œâ”€â”€ my-helpers/
   â””â”€â”€ personal-tools/
   ```

---

### Plugin ç‰ˆæœ¬ç®¡ç†

**ç‰ˆæœ¬å·è§„èŒƒ**ï¼ˆè¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼‰ï¼š

```json
{
  "version": "2.1.3"
  //        â”‚ â”‚ â”‚
  //        â”‚ â”‚ â””â”€â”€ è¡¥ä¸ç‰ˆæœ¬ï¼ˆbug ä¿®å¤ï¼‰
  //        â”‚ â””â”€â”€ æ¬¡ç‰ˆæœ¬ï¼ˆæ–°åŠŸèƒ½ï¼Œå‘åå…¼å®¹ï¼‰
  //        â””â”€â”€ ä¸»ç‰ˆæœ¬ï¼ˆç ´åæ€§å˜æ›´ï¼‰
}
```

**å…¼å®¹æ€§å£°æ˜**ï¼š

```json
{
  "claude": {
    "minVersion": "1.0.0",
    "maxVersion": "2.0.0"
  }
}
```

**æ›´æ–°ç­–ç•¥**ï¼š

```bash
# æ£€æŸ¥æ’ä»¶æ›´æ–°
claude plugin check-update

# æŸ¥çœ‹è¿‡æœŸæ’ä»¶
claude plugin outdated

# æ‰¹é‡æ›´æ–°
claude plugin update --all
```

---

### å¸¸è§é—®é¢˜

**Q: å¦‚ä½•é¿å…æ’ä»¶å†²çªï¼Ÿ**

A: ä½¿ç”¨ç‹¬ç‰¹çš„ Agent åç§°å’Œæè¿°ï¼š

```yaml
# âŒ å®¹æ˜“å†²çª
name: reviewer
description: Review code

# âœ… æ˜ç¡®ç‹¬ç‰¹
name: security-focused-reviewer
description: Use when user asks for "security review", "å®‰å…¨å®¡æŸ¥"
```

**Q: å¦‚ä½•è°ƒè¯•æ’ä»¶åŠ è½½é—®é¢˜ï¼Ÿ**

A: ä½¿ç”¨è¯¦ç»†æ—¥å¿—æ¨¡å¼ï¼š

```bash
claude --plugin-dir /path/to/plugin --log-level debug
```

**Q: æ’ä»¶å¯ä»¥ä¾èµ–å…¶ä»–æ’ä»¶å—ï¼Ÿ**

A: ç›®å‰ä¸æ”¯æŒæ’ä»¶é—´ä¾èµ–ã€‚æ¯ä¸ªæ’ä»¶åº”ä¿æŒç‹¬ç«‹ã€‚

**Q: å¦‚ä½•åˆ†äº«æ’ä»¶ç»™å›¢é˜Ÿï¼Ÿ**

A: ä¸‰ç§æ–¹å¼ï¼š

1. **Git ä»“åº“**
   ```bash
   git clone https://github.com/company/plugins.git ~/.claude/plugins
   ```

2. **npm åŒ…**ï¼ˆå¦‚æœæ‰“åŒ…ä¸º node æ¨¡å—ï¼‰
   ```bash
   npm install -g @company/claude-plugins
   ```

3. **ç›´æ¥å¤åˆ¶**
   ```bash
   cp -r /shared/plugins ~/.claude/
   ```

---

## ç›¸å…³æ–‡æ¡£
[[Prompt, Agent, MCP æ˜¯ä»€ä¹ˆ]] | [[Claude Code å¸¸ç”¨åŠŸèƒ½]] | [[Claude MCP ä½¿ç”¨æŒ‡å—]] | [[Subagent å®æˆ˜ç»ƒä¹ ]]
