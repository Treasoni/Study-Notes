---
tags: [ai, 基础概念, agent]
---

# Agent 智能体

> [!info] 概述
> **Agent 是能"动手干活"的 AI** - 不只会说话，还能调用工具、执行操作、访问文件。就像从"顾问"升级为"管家"，能真正帮你完成任务。

## 核心概念

### 什么是 Agent

**定义**：具备工具调用能力的 AI 系统，能够自主规划、执行、验证任务

**核心公式**：
```
Agent = LLM（大脑）+ Tools（工具）+ Orchestration（编排）
```

**为什么需要 Agent**：
- 普通 AI 只能"说"，不能"做"
- 真实任务需要读写文件、调用 API、执行命令
- Agent 让 AI 从"信息助手"变成"执行助手"

### Agent vs 普通聊天 AI

| 维度 | 普通聊天 AI | Agent |
|------|-------------|-------|
| **能力边界** | 只会说话 | 能调用工具、执行操作 |
| **输出形式** | 纯文本 | 文件、命令、API 调用、代码 |
| **自主性** | 被动回答问题 | 主动规划、执行、验证 |
| **记忆范围** | 对话上下文 | 可访问文件系统、数据库、外部 API |
| **任务完成度** | 给出建议 | 直接完成任务 |

**示例对比**：

| 场景 | 普通聊天 AI | Agent |
|------|-------------|-------|
| "帮我修复这个 bug" | 给出修复建议和代码片段 | 直接修改文件并运行测试 |
| "分析这份数据" | 解释分析方法 | 读取文件、执行分析、生成报告 |
| "部署到服务器" | 列出部署步骤 | 执行部署命令、验证结果 |

### 核心特点

| 特点 | 说明 |
|------|------|
| **工具调用** | 能使用 MCP 工具访问外部资源 |
| **自主规划** | 能分解复杂任务为可执行步骤 |
| **执行验证** | 能检查执行结果是否符合预期 |
| **错误恢复** | 遇到错误能调整策略重试 |

---

## 技术细节

### Agent 工作循环

Agent 遵循 **"感知 → 规划 → 执行 → 反思"** 的循环：

```
┌─────────────────────────────────────────────────────────────┐
│                     Agent 工作循环                           │
│                                                              │
│    ┌──────────┐                                             │
│    │  感知    │ ← 接收用户输入、环境状态                       │
│    └────┬─────┘                                             │
│         ↓                                                    │
│    ┌──────────┐                                             │
│    │  规划    │ ← 分解任务、选择工具、制定策略                  │
│    └────┬─────┘                                             │
│         ↓                                                    │
│    ┌──────────┐                                             │
│    │  执行    │ ← 调用工具、读写文件、执行命令                  │
│    └────┬─────┘                                             │
│         ↓                                                    │
│    ┌──────────┐                                             │
│    │  反思    │ ← 验证结果、发现错误、调整策略                  │
│    └────┬─────┘                                             │
│         │                                                    │
│         └──────→ 循环直到任务完成或达到限制                    │
│                                                              │
└─────────────────────────────────────────────────────────────┘
```

### 四种工作模式

| 模式 | 描述 | 适用场景 |
|------|------|----------|
| **单步执行** | 一次工具调用完成任务 | 简单查询、文件读取 |
| **多步链式** | 按顺序执行多个步骤 | 数据处理流水线 |
| **迭代优化** | 循环执行直到满足条件 | 代码调试、方案优化 |
| **自主探索** | 动态决定下一步行动 | 代码库探索、问题诊断 |

### Agent 能力层级

```
Level 1: 基础对话
   └── 理解用户意图，生成文本回复

Level 2: 工具调用
   └── 能调用预定义的工具函数

Level 3: 自主规划
   └── 能分解复杂任务，制定执行计划

Level 4: 自我反思
   └── 能评估执行结果，发现并纠正错误

Level 5: 协作智能
   └── 能与其他 Agent 协作完成复杂任务
```

### 2025 年 Agentic AI 发展

**核心趋势**：AI 从"助手"变成"队友"

| 发展阶段 | 特征 | 时间 |
|----------|------|------|
| **Chatbot** | 被动问答 | 2022-2023 |
| **Copilot** | 辅助执行 | 2023-2024 |
| **Agent** | 自主执行 | 2024-2025 |
| **Agent Teams** | 协作执行 | 2025-2026 |

**2025 关键进展**：
- Claude Code：完整的代码 Agent
- OpenAI Operator：网页操作 Agent
- Google Project Mariner：浏览器自动化
- 微软 Copilot Agents：企业流程自动化

---

## 与其他概念的关系

```
┌─────────────────────────────────────────────────────────────┐
│                        Agent 智能体                          │
│                     (执行层：自主完成任务)                     │
├─────────────────────────────────────────────────────────────┤
│                          │                                   │
│     ┌────────────────────┼────────────────────┐             │
│     ↓                    ↓                    ↓             │
│ ┌────────┐         ┌──────────┐         ┌─────────┐        │
│ │ Prompt │         │   MCP    │         │  Tools  │        │
│ │ (指令) │         │ (协议)   │         │ (工具)  │        │
│ └────────┘         └──────────┘         └─────────┘        │
│                          │                                   │
│     ┌────────────────────┼────────────────────┐             │
│     ↓                    ↓                    ↓             │
│ ┌─────────┐        ┌──────────┐        ┌────────────┐      │
│ │SubAgent │        │  Skills  │        │Agent Teams │      │
│ │(子代理) │        │  (技能)  │        │  (团队)    │      │
│ └─────────┘        └──────────┘        └────────────┘      │
└─────────────────────────────────────────────────────────────┘
```

| 概念 | 与 Agent 的关系 |
|------|-----------------|
| [[Prompt提示词]] | Prompt 定义 Agent 的任务目标 |
| [[MCP协议]] | MCP 是 Agent 调用外部工具的协议 |
| [[Skills 是什么]] | Skills 是 Agent 的"知识包" |
| [[SubAgent子代理]] | SubAgent 是 Agent 派发的独立执行单元 |
| [[Agent Teams智能体团队]] | 多个 Agent 组成的协作网络 |

---

## 最佳实践

### Agent 使用原则

1. **明确任务边界**：告诉 Agent 能做什么、不能做什么
2. **提供足够上下文**：给 Agent 足够的信息做决策
3. **设置验证机制**：让 Agent 在关键步骤后确认
4. **限制工具权限**：只给必要的工具访问权限

### 工具权限配置

| 任务类型 | 推荐工具权限 |
|----------|-------------|
| 代码审查 | Read, Grep, Glob |
| 代码修改 | Read, Edit, Write, Bash |
| 测试运行 | Read, Bash |
| 文档生成 | Read, Write, Glob |
| 数据分析 | Read, Bash, Write |

### 常见陷阱

| 陷阱 | 问题 | 解决方案 |
|------|------|----------|
| **过度自主** | Agent 做了不该做的事 | 设置明确的 allowed-tools |
| **无限循环** | Agent 陷入死循环 | 设置最大迭代次数 |
| **权限过大** | 误删重要文件 | 使用白名单限制工具 |
| **上下文溢出** | Token 超限 | 使用 SubAgent 隔离 |

---

## 常见问题

### Q1: 什么时候用 Agent，什么时候用普通对话？

**判断标准**：
- 只需要**信息/建议** → 普通对话
- 需要**执行操作**（读写文件、调用 API）→ Agent

### Q2: Agent 会自动完成所有任务吗？

不会。Agent 需要：
- 清晰的任务指令（Prompt）
- 适当的工具权限
- 必要时的用户确认

Agent 是"执行者"，不是"决策者"。关键决策仍需人工确认。

### Q3: 如何控制 Agent 的行为？

主要控制方式：
1. **System Prompt**：定义角色和行为准则
2. **工具白名单**：限制可用的工具
3. **确认机制**：关键操作前请求用户确认
4. **迭代限制**：设置最大循环次数

### Q4: Agent 和 SubAgent 有什么区别？

| 维度 | Agent | SubAgent |
|------|-------|----------|
| **上下文** | 共享主上下文 | 完全独立的上下文 |
| **适合任务** | 线性、中等复杂度 | 高复杂度、需要隔离 |
| **成本** | 中等 | 较高（独立上下文开销） |

---

## 相关文档

### 核心概念
- [[01-基础概念/人工智能重要的六大概念体系]] - 六大概念总览
- [[01-基础概念/Prompt提示词]] - Prompt 定义 Agent 的任务目标
- [[01-基础概念/MCP协议]] - Agent 通过 MCP 调用外部工具
- [[01-基础概念/Skills 是什么]] - Skills 是 Agent 的"知识包"
- [[01-基础概念/SubAgent子代理]] - SubAgent 是 Agent 派发的独立执行单元
- [[01-基础概念/Agent Teams智能体团队]] - 多个 Agent 组成的协作网络

### 实践指南
- [[04-高级应用/Claude Subagent 使用指南]] - SubAgent 实战

---

## 参考资料

- [Anthropic: Building Effective Agents](https://www.anthropic.com/research/building-effective-agents)
- [LangChain Agent Documentation](https://python.langchain.com/docs/modules/agents/)
- [OpenAI Agents Guide](https://platform.openai.com/docs/agents)
- [2025 AI Agent Trends](https://www.ibm.com/think/insights/ai-agents)
