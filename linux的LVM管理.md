
#linux 
# 1. Linux服务器的磁盘
我们在进行linux服务器搭建的时候，我们的硬盘经常是这样的情况：

```text
硬盘 sda        200G
├─ sda2         2G        → /boot
└─ sda3         198G      → LVM 物理卷（PV）
    └─ ubuntu-vg
        └─ ubuntu-lv     99G → /
```
关键点在这里 👇
>- sda3：198G
>- / 实际用的 ubuntu-lv：99G

👉 中间差的 ~99G：
>- 已经在 Volume Group（VG）里
>- 但 没有分配给 Logical Volume（LV）

## 1.1 为什么会这样？（不是你装错）

这是 **Ubuntu 安装器的“保守默认行为”**：

- 使用 LVM
- **只给 `/` 分一半空间**
- 留一半：
    - 方便以后加 `/home`
    - 或快照
    - 或扩容
👉 服务器上这是**好习惯**，但你现在想全用，那就扩。
# 2. 理论讲解
## 2.1 从你的 `lsblk` 结果开始逐层拆

你现在的盘是这样的 👇

```text
sda        200G   ← 整块硬盘
├─sda1       1M
├─sda2       2G   → /boot
└─sda3     198G   → LVM 物理卷（PV）
    └─ubuntu-vg-ubuntu-lv  99G  → /

```

我们按 **“从外到内”** 的顺序来。

### 2.1.1 第 1 层：物理硬盘（Physical Disk）

`sda = 200G`

这是**实打实的 200G 硬盘**，没问题。

### 2.1.2 第 2 层：分区（Partition）

`sda3 = 198G`

这里非常关键的一点：

> **你的 200G 硬盘，已经几乎全部给了 LVM（sda3）**

所以👇  
❌ **问题不在“没分区”**  
❌ **也不在“PVE / Ubuntu 只认 100G”**

## 五、第 3 层：LVM 的第一步 —— PV（物理卷）

`sda3` 并不是直接挂载的，而是：

`sda3 → LVM Physical Volume (PV)`

这一步的含义是：

> **我把一整块分区，交给 LVM 统一管理**

就像：

- 把 198G 现金
    
- 全部存进银行（LVM）
    
- 不再直接揣在兜里用
    

---

## 六、第 4 层：VG（卷组）—— LVM 的“仓库”

在 LVM 里：

`PV(sda3 198G)   ↓ VG(ubuntu-vg)`

**VG = Volume Group（卷组）**

你可以把它理解为：

> **一个“总仓库”，里面有大约 198G 可用空间**

⚠️ 注意：

- **VG ≠ 文件系统**
    
- **VG 不能直接用**
    
- 它只是“空间池”
    

---

## 七、第 5 层：LV（逻辑卷）—— 真正能用的“分区”

`ubuntu-vg └─ ubuntu-lv 99G → /`

这一步发生了什么？

> **你从 198G 的仓库里，只拿了 99G，做成了一个 LV，并挂载为 `/`**

于是就出现了你看到的现象：

- 仓库里：≈ 198G
    
- `/` 实际用的：99G
    
- **剩下 ≈ 100G：还在仓库里，没人用**