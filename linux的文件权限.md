---
tags:
  - linux
---
# 1. 普通用户创建的文件 = 所有人都能用吗？

**不是。❌**

在 Linux 里，**文件从创建那一刻起就有三要素：**

```scss
所有者 (user)
所属组 (group)
其他人 (others)
```

以及三种权限：

```text
r 读   w 写   x 执行
```

## 1.2 普通用户创建文件时的默认情况

假设用户 `alice` 创建了一个文件：

```bash
touch test.txt
ls -l test.txt
```

你通常会看到类似：

`-rw-r--r-- 1 alice alice 0 test.txt`

拆开看：

```powershell
-rw- r-- r--
 ↑   ↑   ↑
 |   |   |
 |   |   └─ 其他用户（others）
 |   └──── 所属组（group）
 └──────── 文件所有者（user）
`
```
意思是：

- **alice（创建者）**：可读、可写
- **同组用户**：只能读
- **其他所有用户**：只能读

👉 **并不是“所有人都能随便用”**  
只是“默认情况下，别人可能能读，但不能改、不能执行”。

而且这个“默认权限”还会被 **umask** 影响（这是进阶点，先记住有这么个东西就行）。

# 2. root 创建的文件，普通用户就不能用吗？

**不完全对。**

👉 真相是：  
**能不能用，跟是不是 root 创建的没直接关系，只跟权限有关。**

 **举个例子**

root 创建文件：

```bash
sudo touch /tmp/rootfile
ls -l /tmp/rootfile
```

可能是：

`-rw-r--r-- 1 root root 0 rootfile`

这代表：

- root：可读可写
- 同组（root 组）：可读
- 其他用户：**可读**

👉 **普通用户是“能读”的**

但如果是这样：

`-rw------- 1 root root 0 rootfile`

那就表示：

- 只有 root 能读写
- **普通用户完全没权限**

📌 所以这句话才是准确的：

> 普通用户是否能使用 root 创建的文件，取决于 root 给没给权限。

---

# 3. 赋予权限的方式

## 3.1  方式一：`chmod` —— 改“谁能干什么”

这是**最直接、最暴力**的方式。

**例 1：所有人都能读**

```bash
chmod 644 file.txt
# 等价于
chmod u=rw,g=r,o=r file.txt
```

**例 2：所有人都能执行（脚本/程序）**

```bash
chmod 755 run.sh
```

意思是：

|权限|字母|数字|
|---|---|---|
|读|r|4|
|写|w|2|
|执行|x|1|
|无|-|0|
Linux 权限分三类人：

```
[ 用户 ][ 用户组 ][ 其他人 ]
```

所以 **644** 实际是：

```sql
6   4   4
↑   ↑   ↑
|   |   |
|   |   └─ 其他人 (others)
|   └──── 用户组 (group)
└──────── 所有者 (user)
```

📌 **适合场景**：

- 公共脚本
- 系统工具
- 临时共享

⚠️ **风险**：

- 一不小心就“全世界可用”，安全性低
### 3.1.1 常见权限数字速查表（建议你记这几个）

|数字|含义|场景|
|---|---|---|
|600|仅自己可读写|密钥、密码|
|644|自己读写，别人只读|配置文件|
|700|仅自己可执行|私有脚本|
|755|大家都能跑|公共程序|
|777|谁都能干啥|❌ 极不推荐|

⚠️ **777 ≈ 安全事故预告**
## 3.2 方式二：用户组（推荐的“工程级做法”）

这是 Linux **真正设计出来用于多人协作的方式**。

**思路是：**

> **不给“所有人”权限，只给“特定一群人”权限**


### 3.2.1 创建一个组

```bash
sudo groupadd dev
```

### 3.2.2 把用户加进组

```bash
sudo usermod -aG dev alice
sudo usermod -aG dev bob
```

（重新登录后生效）
**逐参数解释（非常重要）**

|参数|含义|
|---|---|
|usermod|修改用户|
|-a|append（追加）|
|-G|指定附加组|
|dev|组名|
|alice|用户名|

### 3.2.3 改文件所属组

```bash
sudo chown root:dev app.sh
```

**冒号左右是什么意思？**

`所有者 : 所属组`

你也可以只改组：

```bash
sudo chown :dev app.sh
```
### 3.2.4 设置权限

```bash
sudo chmod 750 app.sh
```

结果：

`-rwxr-x--- 1 root dev app.sh`

解释：

- root：完全控制
- dev 组里的用户：可执行
- 其他人：**啥也干不了**

📌 **这才是服务器 / Docker / 运维 / 多用户系统的常态做法**

**chmod 决定“能干啥”**  
**chown / group 决定“谁能干”**