# 1.什么是 WinPE？

**WinPE = Windows Preinstallation Environment**

你可以把它理解成：

> **一个迷你版 Windows（装在 U 盘里跑）**

特点：

>- 不依赖你硬盘里的系统
>- 能看到所有磁盘
>- 能分区 / 格式化 / 修复引导
>- 常见于 **装机、救援、PE 系统**

所以很多装机教程会说：

> 👉「进 WinPE，把硬盘格式化一下」

# 2.“WinPE 格式硬盘”到底在干嘛？

本质就是在 **WinPE 环境下，对硬盘做这些事之一或多个**：

## 2.1清空旧分区表（最重要）

比如你硬盘之前可能是：

>- Windows 装过
>- 装过 ESXi / 黑群晖
>- 装过 Linux / OpenWrt
>- 被 Ventoy / PE 折腾过

👉 **这些都会留下奇怪的分区表 / 引导信息**

PVE 安装器看到后可能会：

>- 不显示硬盘
>- 报错
>- 装到一半失败

WinPE 格式硬盘 = **把这些全抹掉**

## 2.1统一分区表格式（GPT / MBR）

常见坑:

| 情况            | 结果       |
| ------------- | -------- |
| BIOS 模式 + GPT | 启动失败     |
| UEFI 模式 + MBR | PVE 安装异常 |
| 混合引导          | 各种玄学问题   |

WinPE 里可以明确做：

`UEFI → GPT Legacy → MBR`

## 2.2删除隐藏 / 保留分区

比如：

>- EFI 分区
>- MSR
>- 恢复分区
>- OEM 分区


这些**在 Windows 里你有时都删不干净**  
👉 PE 里一刀全没
