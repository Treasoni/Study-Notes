---
tags: [pve]
---

# PVE ç½‘ç»œä¿¡æ¯ä¿®æ”¹æŒ‡å—

> [!info] æ¦‚è¿°
> PVE å®‰è£…åå¯èƒ½éœ€è¦ä¿®æ”¹ç½‘ç»œä¿¡æ¯ï¼ˆIP åœ°å€ã€ç½‘å…³ç­‰ï¼‰ï¼Œå¯ä»¥é€šè¿‡ Web UI æˆ–å‘½ä»¤è¡Œä¸¤ç§æ–¹å¼å®Œæˆã€‚
> ç±»æ¯”ï¼šå°±åƒç»™ç”µè„‘æ¢ä¸€ä¸ªæ–°çš„ IP åœ°å€ï¼Œè®©å®ƒåœ¨ç½‘ç»œä¸­æœ‰ä¸€ä¸ªæ–°çš„"èº«ä»½"ã€‚

## æ ¸å¿ƒæ¦‚å¿µ ğŸ’¡
- **vmbr0**ï¼šé»˜è®¤ç½‘æ¡¥åç§°ï¼Œç›¸å½“äºè™šæ‹Ÿäº¤æ¢æœº
- **ç‰©ç†ç½‘å¡**ï¼šçœŸå®ç½‘å¡åç§°ï¼Œå¦‚ eno1ã€enp3s0ã€ens18
- **ifreload -a**ï¼šåº”ç”¨ç½‘ç»œé…ç½®çš„å‘½ä»¤
- **Web UI æ–¹æ³•**ï¼šå®˜æ–¹æ¨èï¼Œæœ€å®‰å…¨
- **å‘½ä»¤è¡Œæ–¹æ³•**ï¼šé€‚åˆç†Ÿæ‚‰ Linux çš„ç”¨æˆ·

## æ–¹æ³•ä¸€ï¼šWeb UI ä¿®æ”¹ï¼ˆå®˜æ–¹æ¨èï¼‰

è¿™æ˜¯**æœ€ç¨³**ã€**ä¸ä¼šè¢«å›æ»š**çš„æ–¹å¼ã€‚

### æ“ä½œæ­¥éª¤

1. **æ‰“å¼€ PVE Web**
   ```
   https://192.168.2.10:8006
   ```

2. **è¿›å…¥ç½‘ç»œé…ç½®**
   - èŠ‚ç‚¹ â†’ System â†’ Network

3. **æ‰¾åˆ° vmbr0**
   - ç‚¹å‡» `vmbr0`
   - ç‚¹å‡» `Edit`

4. **é…ç½®ç½‘ç»œä¿¡æ¯**

   å¡«å†™ä»¥ä¸‹å†…å®¹ï¼ˆç¤ºä¾‹ï¼‰ï¼š

   | é…ç½®é¡¹ | å€¼ |
   |--------|-----|
   | IPv4/CIDR | 192.168.2.10/24 |
   | Gateway | 192.168.2.1 |
   | Bridge ports | eno1ï¼ˆä»ä¸‹æ‹‰åˆ—è¡¨é€‰ï¼‰ |

5. **åº”ç”¨é…ç½®**
   - ç‚¹å‡» `OK`
   - ç‚¹å‡» `Apply Configuration`
   - æˆ–é‡å¯ PVE

> [!warning] é‡è¦æç¤º
> **ä¸è¦ä¹±å¡«ç½‘å¡å**ï¼Œä»ä¸‹æ‹‰åˆ—è¡¨é‡Œé€‰æ‹©çœŸå®å­˜åœ¨çš„ç½‘å¡

## æ–¹æ³•äºŒï¼šå‘½ä»¤è¡Œä¿®æ”¹

### æ“ä½œæ­¥éª¤

#### â‘  ç¡®è®¤çœŸå®ç½‘å¡å

```bash
ip link
```

ä½ ä¼šçœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š
```
1: lo: <LOOPBACK,UP,LOWER_UP>
2: eno1: <BROADCAST,MULTICAST,UP,LOWER_UP>
3: enp3s0: <BROADCAST,MULTICAST>
4: vmbr0: <BROADCAST,MULTICAST,UP,LOWER_UP>
```

ğŸ‘‰ ç”¨**çœŸå®å­˜åœ¨çš„é‚£ä¸ª**ï¼ˆå¦‚ eno1ï¼‰

#### â‘¡ æ”¹æ–‡ä»¶ï¼ˆç¤ºä¾‹ï¼‰

```bash
nano /etc/network/interfaces
```

é…ç½®å†…å®¹ï¼š

```bash
auto lo
iface lo inet loopback

auto eno1
iface eno1 inet manual

auto vmbr0
iface vmbr0 inet static
    address 192.168.2.10/24
    gateway 192.168.2.1
    bridge-ports eno1
    bridge-stp off
    bridge-fd 0
```

#### â‘¢ âš ï¸ å…³é”®ä¸€æ­¥ï¼ˆå¾ˆå¤šäººæ¼äº†ï¼‰

```bash
ifreload -a
```

æˆ–ï¼ˆè€ç‰ˆæœ¬ï¼‰ï¼š

```bash
systemctl restart networking
```

ğŸ“Œ **åª reboot å¾ˆå¤šæ—¶å€™æ˜¯ä¸ç”Ÿæ•ˆçš„**

## é…ç½®æ–‡ä»¶è¯¦è§£

### /etc/network/interfaces ç»“æ„

```bash
# å›ç¯æ¥å£ï¼ˆæœ¬åœ°é€šä¿¡ï¼‰
auto lo
iface lo inet loopback

# ç‰©ç†ç½‘å¡ï¼ˆæ‰‹åŠ¨é…ç½®ï¼Œäº¤ç»™ç½‘æ¡¥ç®¡ç†ï¼‰
auto eno1
iface eno1 inet manual

# ç½‘æ¡¥ï¼ˆè™šæ‹Ÿäº¤æ¢æœºï¼‰
auto vmbr0
iface vmbr0 inet static
    address 192.168.2.10/24    # PVE çš„ IP åœ°å€
    gateway 192.168.2.1         # ç½‘å…³åœ°å€
    bridge-ports eno1           # ç»‘å®šçš„ç‰©ç†ç½‘å¡
    bridge-stp off              # å…³é—­ç”Ÿæˆæ ‘åè®®
    bridge-fd 0                 # è½¬å‘å»¶è¿Ÿä¸º 0
```

## å¸¸è§ç½‘ç»œé…ç½®

### é™æ€ IPï¼ˆæ¨èï¼‰

```bash
iface vmbr0 inet static
    address 192.168.2.10/24
    gateway 192.168.2.1
```

### DHCPï¼ˆè‡ªåŠ¨è·å– IPï¼‰

```bash
iface vmbr0 inet dhcp
```

### å¤šä¸ªç½‘æ¡¥ï¼ˆé«˜çº§ï¼‰

```bash
auto vmbr0
iface vmbr0 inet static
    address 192.168.2.10/24
    gateway 192.168.2.1
    bridge-ports eno1
    bridge-stp off
    bridge-fd 0

auto vmbr1
iface vmbr1 inet manual
    bridge-ports eno2
    bridge-stp off
    bridge-fd 0
```

## æ³¨æ„äº‹é¡¹ âš ï¸

1. **ç½‘å¡åå¿…é¡»çœŸå®å­˜åœ¨**
   - ç”¨ `ip link` æŸ¥çœ‹çœŸå®ç½‘å¡å
   - ä¸è¦éšæ„å‡è®¾æˆ–å¤åˆ¶

2. **ä¿®æ”¹åå¿…é¡»åº”ç”¨**
   - `ifreload -a` æˆ–é‡å¯
   - åªæ”¹æ–‡ä»¶ä¸ç”Ÿæ•ˆ

3. **Web UI ä¿®æ”¹æ›´å®‰å…¨**
   - ä¸ä¼šå‡ºç°è¯­æ³•é”™è¯¯
   - è‡ªåŠ¨åº”ç”¨é…ç½®

4. **é¿å…ç½‘ç»œä¸­æ–­**
   - å»ºè®®åœ¨æœ¬åœ°æ“ä½œæˆ–ç”¨ IPMI/iKVM
   - è¿œç¨‹ä¿®æ”¹å°å¿ƒé…ç½®é”™è¯¯å¯¼è‡´å¤±è”

5. **æ˜¾ç¤ºå™¨æ˜¾ç¤ºé—®é¢˜**
   - ä¿®æ”¹åé‡å¯ï¼Œæ˜¾ç¤ºå±å¯èƒ½æ˜¾ç¤ºæ—§åœ°å€
   - å®é™…ä¸Šå·²ç»æ”¹äº†ï¼Œç”¨æ–° IP è®¿é—®

## å¸¸è§é—®é¢˜ â“

**Q: ä¿®æ”¹åæ— æ³•è®¿é—® Web ç•Œé¢ï¼Ÿ**
A: æ£€æŸ¥ IP åœ°å€æ˜¯å¦æ­£ç¡®ï¼Œç”¨ `ip addr` æŸ¥çœ‹å½“å‰é…ç½®ã€‚

**Q: ç½‘å¡åä¸å¯¹æ€ä¹ˆåŠï¼Ÿ**
A: ç”¨ `ip link` æŸ¥çœ‹çœŸå®ç½‘å¡åï¼Œå¯èƒ½æ¯æ¬¡å¯åŠ¨ä¼šå˜åŒ–ã€‚

**Q: ifreload -a æŠ¥é”™ï¼Ÿ**
A: æ£€æŸ¥é…ç½®æ–‡ä»¶è¯­æ³•ï¼Œå¯èƒ½æ˜¯æ‹¼å†™é”™è¯¯æˆ–æ ¼å¼é—®é¢˜ã€‚

**Q: Web UI å’Œå‘½ä»¤è¡Œé€‰å“ªä¸ªï¼Ÿ**
A: æ¨è Web UIï¼Œæ›´å®‰å…¨å¯é ã€‚å‘½ä»¤è¡Œé€‚åˆæ‰¹é‡ä¿®æ”¹ã€‚

**Q: å¦‚ä½•æ¢å¤é»˜è®¤é…ç½®ï¼Ÿ**
A: ç”¨ PVE å®‰è£…ç›˜å¯åŠ¨ï¼Œé€‰æ‹©æ¢å¤ç½‘ç»œé…ç½®ã€‚

**Q: å¯ä»¥é…ç½®å¤šä¸ª IP åœ°å€å—ï¼Ÿ**
A: å¯ä»¥ï¼Œç”¨ `up` å‘½ä»¤æ·»åŠ åˆ«åï¼Œå¦‚ `up ip addr add ... dev vmbr0`ã€‚

**Q: ä¿®æ”¹åéœ€è¦é‡å¯è™šæ‹Ÿæœºå—ï¼Ÿ**
A: ä¸éœ€è¦ï¼ŒPVE ç½‘ç»œé…ç½®ä¸å½±å“è™šæ‹Ÿæœºè¿è¡Œï¼ˆé™¤éæ”¹äº†ç½‘æ¡¥é…ç½®ï¼‰ã€‚

## ç›¸å…³æ–‡æ¡£

[[å®‰è£…å’Œä½¿ç”¨PVE]] | [[PVEçš„ç½‘ç»œé€»è¾‘è®²è§£]] | [[PVEå­¦ä¹ ç¬”è®°MOC]]
